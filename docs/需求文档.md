# VocabFlow AI 2.0 技术规格说明书 (Full Stack Specification)

## 1. 项目愿景 (Project Vision)

打造一个具备“未来感”的英语学习工作台。通过极致的动效反馈（Framer Motion）与高阶审美 UI（Tailwind CSS），配合智谱 GLM-4 的深度语言分析，提升单词与句子的记录意愿与记忆深度。

---

## 前置要求

1. 前端项目放在frontend文件夹下，后端项目放在backend文件夹下。
2. 数据库名为learning_english, 账号: root, 密码: root，端口: 3306

## 2. 技术栈要求

- **前端基础框架**: Next.js 14+ (App Router)
- **后端基础框架**: Nestjs (App Router)
- **样式方案**: Tailwind CSS (Glassmorphism, 渐变色)
- **动效库**: Framer Motion (实现卡片入场、悬停及平滑过渡)
- **数据库**: MySQL (通过 Prisma ORM)
- **AI 模型**: 智谱 AI - GLM-4 API

## 3. 视觉与交互规范 (UI/UX Standards)

### 3.1 视觉风格

- **主题**: 赛博极简主义 + 玻璃拟态 (Glassmorphism)。
- **背景**:
  - 动态网格背景：`bg-grid-white/[0.02]` 叠加上层模糊。
  - 交互渐变：使用 `bg-gradient-to-tr from-slate-900 via-indigo-950 to-emerald-950`。
- **组件**: 容器采用 `backdrop-blur-xl`、`bg-white/5` 及 `border-white/10`。

### 3.2 核心组件：8-下划线矩阵输入 (The Matrix Input)

- **形态**: 页面中心横向排列 8 个独立的 Input，仅保留底部 Border（下划线）。
- **动效算法**:
  - **空格流转 (Auto-Skip)**: 监听 `onKeyDown`。若 `e.code === 'Space'` 且当前 Input 非空，自动 `focus()` 下一个 Input，并触发当前下划线的“脉冲”收缩动画。
  - **回车聚合 (Batch Save)**: 按下 `Enter` 时，过滤所有非空输入，通过 `join(' ')` 聚合为一条记录，触发“卡片飞入”列表的 `LayoutId` 动画。

---

## 4. 功能模块详情

### 4.1 记录管理：Bento Grid 日期流

- **布局**:
  - 采用 **Bento Grid (文具盒)** 布局。长句子横跨两列，短单词占据单列。
  - **日期分组**: 以日期为大标题（如：*Jan 27, 2026*），标题附带线性渐变色。
- **卡片交互**:
  - **悬停**: 产生跟随鼠标的径向光晕（Radial Gradient Highlight）。
  - **排序**: 同一日期内记录按创建时间倒序（最新在上）。

### 4.2 AI 深度分析引擎 (GLM-4 Integration)

- **触发**: 点击记录卡片。
- **提示词策略 (Prompting)**:
  > "作为英语专家，分析文本：{content}。返回 JSON 格式，包含：{pos: 词性, cn: 中文, etymology: 词源/词根, sentences: [2个好莱坞对白风格例句], tips: 1个记忆点}。"
- **反馈效果**: 加载时使用“字符跳变”动画 (Cipher Text Effect)，返回后卡片平滑向下展开显示详情。

---

## 5. 技术架构与数据模型

### 5.1 数据库架构 (MySQL + Prisma)

```prisma
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model VocabEntry {
  id          String   @id @default(cuid())
  content     String   @db.Text      // 原始输入的单词或句子
  pos         String?                // 词性
  translation String?  @db.Text      // AI 翻译
  aiAnalysis  Json?                  // 存储词根、例句等结构化数据
  createdAt   DateTime @default(now())
  dateGroup   String                 // 分组索引 (YYYY-MM-DD)
  
  @@index([dateGroup])
}
```
